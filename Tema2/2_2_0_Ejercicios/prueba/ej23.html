<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tres en Raya</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #tablero {
            display: grid;
            grid-template-columns: repeat(3, 50px);
            grid-gap: 5px;
            margin-bottom: 20px;
        }
        .casilla {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #000;
            font-size: 24px;
            cursor: pointer;
        }
        .casilla.disabled {
            cursor: not-allowed;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>Tres en Raya</h1>
    <div id="tablero"></div>
    <div id="resultado"></div>

    <script>
        // Crear el tablero de tres en raya vacío
        let tablero = [
            ['', '', ''],
            ['', '', ''],
            ['', '', '']
        ];

        let turno = 'X'; // Inicia con el jugador X
        let juegoTerminado = false;

        // Función para comprobar si hay un ganador
        function comprobarGanador(tablero) {
            const combinacionesGanadoras = [
                // Filas
                [tablero[0][0], tablero[0][1], tablero[0][2]],
                [tablero[1][0], tablero[1][1], tablero[1][2]],
                [tablero[2][0], tablero[2][1], tablero[2][2]],
                // Columnas
                [tablero[0][0], tablero[1][0], tablero[2][0]],
                [tablero[0][1], tablero[1][1], tablero[2][1]],
                [tablero[0][2], tablero[1][2], tablero[2][2]],
                // Diagonales
                [tablero[0][0], tablero[1][1], tablero[2][2]],
                [tablero[0][2], tablero[1][1], tablero[2][0]]
            ];

            for (const combinacion of combinacionesGanadoras) {
                if (combinacion[0] && combinacion[0] === combinacion[1] && combinacion[1] === combinacion[2]) {
                    return combinacion[0]; // Retorna el ganador ('X' o 'O')
                }
            }
            return null; // No hay ganador
        }

        // Función para manejar el clic en una casilla
        function manejarClic(event, fila, columna) {
            if (juegoTerminado || tablero[fila][columna] !== '') return;

            tablero[fila][columna] = turno; // Actualizar el tablero
            event.target.innerText = turno; // Mostrar el turno en la casilla

            // Comprobar si hay ganador
            const ganador = comprobarGanador(tablero);
            const resultadoDiv = document.getElementById('resultado');

            if (ganador) {
                resultadoDiv.innerText = `El ganador es: ${ganador}`;
                juegoTerminado = true;
                desactivarTablero();
            } else if (tableroPlano().every(casilla => casilla !== '')) {
                resultadoDiv.innerText = 'Es un empate';
                juegoTerminado = true;
            } else {
                turno = turno === 'X' ? 'O' : 'X'; // Cambiar de turno
            }
        }

        // Función para desactivar el tablero (cuando hay ganador o empate)
        function desactivarTablero() {
            const casillas = document.querySelectorAll('.casilla');
            casillas.forEach(casilla => casilla.classList.add('disabled'));
        }

        // Función para crear el tablero visualmente
        function crearTablero() {
            const tableroDiv = document.getElementById('tablero');
            tableroDiv.innerHTML = ''; // Limpiar tablero

            tablero.forEach((fila, i) => {
                fila.forEach((casilla, j) => {
                    const casillaDiv = document.createElement('div');
                    casillaDiv.classList.add('casilla');
                    casillaDiv.innerText = casilla;
                    casillaDiv.addEventListener('click', (event) => manejarClic(event, i, j));
                    tableroDiv.appendChild(casillaDiv);
                });
            });
        }

        // Función para aplanar el tablero (para comprobar empate)
        function tableroPlano() {
            return tablero.flat();
        }

        // Inicializar el tablero
        crearTablero();
    </script>
</body>
</html>
